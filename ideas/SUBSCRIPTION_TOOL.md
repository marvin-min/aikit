# 订阅管理工具 - 产品方向

## 概述

将 AIKit 从单个网页总结工具升级为**智能订阅管理器**，帮助用户高效管理大量信息源，用 AI 自动总结和过滤订阅内容。

## 产品定位

### 核心价值

**"用 AI 帮你'阅读'所有订阅"**

- 每天几分钟了解所有订阅更新
- 只看感兴趣的内容
- 提升信息获取效率

### 解决的问题

1. **信息过载**
   - 订阅太多内容看不过来
   - 重要信息被淹没

2. **时间浪费**
   - 点进去才发现不感兴趣
   - 频繁切换多个订阅源

3. **错过重要内容**
   - 订阅太多漏掉重要更新
   - 没有统一的更新视图

## 产品功能

### 核心功能

✅ **订阅源管理**
   - 添加/删除/编辑订阅源
   - 支持多种源类型（RSS、博客、新闻网站、社交媒体）

✅ **定时抓取**
   - 可配置抓取频率（每小时、每天、每周）
   - 自动更新内容

✅ **AI 智能总结**
   - 批量处理多个源
   - 提取核心要点
   - 多个来源合并总结

✅ **个性化过滤**
   - 用户配置兴趣关键词
   - 智能判断内容相关性
   - 只推送相关内容

✅ **时间线视图**
   - 按时间展示所有更新
   - 一目了然看新内容
   - 快速浏览历史

### 增强功能（Phase 2）

- 邮件/消息推送
- 内容打标签和分类
- 全文搜索
- 导出为 PDF/Markdown
- 多用户支持
- 移动端适配

## 技术架构

### 系统架构

```
┌─────────────────────────────────────────────────────────┐
│                    前端界面                          │
│         CLI / Web / Mobile / Email                 │
└────────────────────┬────────────────────────────────┘
                     │
                     ▼
┌─────────────────────────────────────────────────────────┐
│                  API 网关                            │
│                  FastAPI                             │
└────────────────────┬────────────────────────────────┘
                     │
        ┌────────────┼────────────┐
        │            │            │
        ▼            ▼            ▼
┌───────────┐ ┌───────────┐ ┌───────────┐
│ 订阅管理  │ │ 定时任务   │ │ 内容处理  │
│  Service  │ │ Scheduler │ │  Service  │
└─────┬─────┘ └─────┬─────┘ └─────┬─────┘
      │               │               │
      ▼               ▼               ▼
┌─────────────────────────────────────────────────────────┐
│                   数据存储                             │
│         SQLite / PostgreSQL / Redis                   │
└─────────────────────────────────────────────────────────┘
```

### 技术栈

**后端：**
- Python 3.10+
- FastAPI（API 服务）
- APScheduler / Celery（定时任务）
- SQLite / PostgreSQL（数据存储）

**前端：**
- Vue 3 / React（Web 界面）
- Tailwind CSS（样式）

**AI 能力：**
- LangChain（RAG 框架）
- 通义千问 / 硅基流动（LLM）
- Chroma（向量数据库）

### 数据模型

```python
# 订阅源
class Subscription:
    id: UUID
    name: str                    # 订阅名称
    url: str                     # 订阅地址
    type: SubscriptionType        # rss, blog, news, social
    schedule: str                # hourly, daily, weekly
    keywords: List[str]          # 兴趣关键词
    active: bool                 # 是否启用
    created_at: datetime
    updated_at: datetime

# 抓取记录
class Article:
    id: UUID
    subscription_id: UUID        # 所属订阅
    title: str                  # 标题
    url: str                    # 原文链接
    content: str                # 原文内容
    summary: str                # AI 总结
    relevance_score: float      # 相关性评分
    published_at: datetime       # 发布时间
    processed_at: datetime       # 处理时间
    read: bool                 # 是否已读

# 用户配置
class UserPreferences:
    id: UUID
    keywords: List[str]         # 全局兴趣关键词
    schedule: str              # 默认抓取频率
    notification_enabled: bool   # 是否启用推送
    notification_time: str     # 推送时间
```

### 核心流程

```
1. 订阅管理
   ├─ 添加订阅源（URL、类型、频率）
   ├─ 配置兴趣关键词
   └─ 启用/禁用订阅

2. 定时抓取
   ├─ 定时触发抓取任务
   ├─ 并行抓取多个订阅源
   ├─ 保存原始内容
   └─ 错误处理和重试

3. AI 处理
   ├─ 提取文本内容
   ├─ AI 总结（批量）
   ├─ 相关性打分
   └─ 保存总结

4. 内容展示
   ├─ 按时间排序
   ├─ 过滤相关性
   ├─ 展示总结
   └─ 链接到原文
```

## 实现路线图

### Phase 1：MVP（1-2 周）

**目标：** 验证核心概念

- [ ] 订阅源管理（CRUD）
- [ ] 单次抓取和总结
- [ ] 命令行查看总结
- [ ] SQLite 数据存储
- [ ] APScheduler 定时任务

**交付物：**
- CLI 工具
- 支持手动和定时抓取
- 基本的订阅管理

### Phase 2：自动化（1 周）

**目标：** 提升稳定性和性能

- [ ] 批量并行抓取
- [ ] 错误重试机制
- [ ] RSS 解析支持
- [ ] 兴趣关键词过滤
- [ ] 相关性评分

**交付物：**
- 稳定的抓取系统
- 智能过滤

### Phase 3：Web 界面（2-3 周）

**目标：** 提升用户体验

- [ ] FastAPI 后端
- [ ] 前端界面（Vue 3）
- [ ] 时间线视图
- [ ] 订阅管理界面
- [ ] 用户认证

**交付物：**
- 完整的 Web 应用
- 用户友好的界面

### Phase 4：增强功能（按需）

**目标：** 增加差异化

- [ ] 邮件/消息推送
- [ ] 多源合并总结
- [ ] 内容打标签
- [ ] 全文搜索
- [ ] 导出功能
- [ ] 多用户支持

## MVP 设计

### 快速验证版本

**功能范围：**
1. 订阅管理（添加/删除/列表）
2. 定时抓取（每小时）
3. AI 总结（批量）
4. 命令行查看

**用户流程：**
```bash
# 添加订阅
aikit-subscribe add --name "技术博客" --url "https://example.com/rss"

# 列出所有订阅
aikit-subscribe list

# 手动抓取
aikit-subscribe fetch

# 查看最新总结
aikit-subscribe summary --today

# 删除订阅
aikit-subscribe remove --id xxx
```

### 验证指标

- [ ] 能否添加 10+ 个订阅源
- [ ] 能否在 5 分钟内完成所有抓取
- [ ] 总结质量是否可接受
- [ ] 能否解决信息过载问题

## 与现有 AIKit 的关系

### 复用现有代码

✅ **RAG 总结能力**
   - 直接复用 `WebSummarizer`
   - 向量化和检索逻辑
   - LLM 调用封装

✅ **多模型支持**
   - 千问/硅基流动切换
   - 已有的配置管理

### 需要新增的部分

- **订阅管理系统**
- **定时任务调度**
- **数据持久化**
- **用户界面**

## 竞品分析

### 现有解决方案

1. **Feedly / Inoreader**
   - 优点：功能完善，界面好
   - 缺点：没有 AI 总结，仍需阅读全文

2. **Newsletter AI**
   - 优点：AI 总结
   - 缺点：仅支持 Newsletter，不支持其他源

3. **自建方案**
   - 优点：完全可控
   - 缺点：需要开发，技术门槛高

### 差异化优势

- **开源**：完全可控，可私有部署
- **轻量**：CLI + Web，资源占用少
- **智能**：多源合并总结，个性化过滤
- **灵活**：支持多种订阅源类型

## 风险和挑战

### 技术风险

1. **抓取稳定性**
   - 反爬机制
   - 页面结构变化
   - 解决方案：多样化抓取策略，错误重试

2. **内容质量**
   - 总结质量依赖模型
   - 相关性判断准确度
   - 解决方案：用户反馈优化，模型微调

### 产品风险

1. **用户习惯**
   - 用户已习惯现有工具
   - 改用成本高
   - 解决方案：提供迁移工具，降低使用门槛

2. **商业可行性**
   - 盈利模式不清晰
   - 成本控制（API 费用）
   - 解决方案：免费+增值模式，优化 API 使用

## 下一步行动

### 立即可以做的

1. **技术验证**
   - 实现一个简单的订阅抓取
   - 测试批量总结性能
   - 评估定时任务方案

2. **用户调研**
   - 与潜在用户访谈
   - 了解真实需求和痛点
   - 验证产品假设

3. **原型开发**
   - 开发 MVP 版本
   - 邀请用户试用
   - 收集反馈迭代

### 讨论点

1. **目标用户群体**
   - 开发者/技术爱好者？
   - 内容创作者/信息工作者？
   - 普通用户？

2. **核心功能优先级**
   - 定时任务 vs 通知推送？
   - Web 界面 vs CLI 工具？
   - 单人使用 vs 多用户？

3. **技术选型**
   - SQLite vs PostgreSQL？
   - APScheduler vs Celery？
   - Vue vs React？

---

**文档创建日期：** 2026-01-08
**版本：** v1.0
**状态：** 探讨中
